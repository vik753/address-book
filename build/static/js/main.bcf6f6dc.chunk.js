(this.webpackJsonpbreez=this.webpackJsonpbreez||[]).push([[0],{139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a.n(n),c=a(45),r=a.n(c),i=(a(52),a(11)),o=a(10),l=a(3),d=a(17),j=(a(53),s.a.createContext({})),b=a(142),u=a(1),m=function(){var e=Object(n.useContext)(j),t=e.users,a=e.setUsers,s=t.map((function(e){var n=Object.values(e.phones),s="".concat(n[0].description,": ").concat(n[0].number),c=n.filter((function(e){return e.number!==n[0].number})),r="".concat(Object(d.a)(e.first_name)[0].toUpperCase()).concat(Object(d.a)(e.last_name)[0].toUpperCase());return Object(u.jsxs)(o.b,{className:"user-card",to:"/edit/".concat(e.id),title:"Click to edit",children:[Object(u.jsxs)("div",{className:"user-name_wrapper",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("span",{className:"user-logo",children:r}),Object(u.jsxs)("span",{className:"user-name",children:[e.first_name," ",e.last_name]})]}),Object(u.jsxs)("div",{className:"user-name_inner-wrapper",children:[Object(u.jsx)("div",{className:"user-first_phone",children:s}),Object(u.jsx)("div",{className:"remove-contact",title:"Remove contact","data-id":e.id,onClick:function(n){if(n.preventDefault(),n.stopPropagation(),window.confirm("Do you really want to delete this contact?")){var s=n.target.dataset.id;if(s){var c=t.filter((function(e){return e.id!==s}));console.log(c,e.id,s),a(c)}}}})]})]}),n.length>1&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"more-phones",children:"more phones..."}),Object(u.jsx)("div",{className:"user-other_phones",children:c.length?c.map((function(e){return Object(u.jsxs)("span",{children:[e.description,": ",e.number]},e.number)})):"no more phones here..."})]})]},e.id)}));return Object(u.jsxs)("div",{className:"home-wrapper",children:[Object(u.jsx)("h1",{children:"Phone Book"}),Object(u.jsxs)("div",{className:"contacts-wrapper",children:[Object(u.jsx)(o.b,{className:"add-contact",title:"Add new",to:"/edit/".concat(Object(b.a)())}),s]})]})},h=a(5),p=a(12),O=a(20),f=a.n(O),v=(a(59),a(27)),x=a.n(v),N=function(){var e=Object(l.g)().id,t=Object(l.f)(),a=Object(n.useRef)(null),s=Object(n.useRef)(null),c=Object(n.useContext)(j),r=c.users,o=c.setUsers,m=Object(n.useState)(null),O=Object(i.a)(m,2),v=O[0],N=O[1],_=Object(n.useState)(0),g=Object(i.a)(_,2),w=g[0],k=(g[1],Object(n.useState)({first_name:!0,last_name:!0})),C=Object(i.a)(k,2),y=C[0],S=C[1],D=Object(n.useState)({}),B=Object(i.a)(D,2),F=B[0],I=B[1],P=Object(n.useState)(!0),A=Object(i.a)(P,2),J=A[0],q=A[1];Object(n.useEffect)((function(){if(e){var t=r.filter((function(t){return t.id===e}));if(t.length){N(t[0]);var a={};Object.keys(t[0].phones).map((function(e){a[e]=!0})),I(a)}else N({id:e,first_name:"",last_name:"",phones:Object(p.a)({},Object(b.a)(),{number:"",description:"mobile"})})}}),[]);var L=function(e){e.preventDefault();var t=e.target.id;t&&(R(),N((function(a){return Object(h.a)(Object(h.a)({},a),{},{phones:Object(h.a)(Object(h.a)({},a.phones),{},Object(p.a)({},t,{description:a.phones[t].description,number:e.target.value}))})})))},U=function(e){e.preventDefault();var t=e.target.dataset.id;N((function(a){return Object(h.a)(Object(h.a)({},a),{},{phones:Object(h.a)(Object(h.a)({},a.phones),{},Object(p.a)({},t,{description:e.target.value,number:a.phones[t].number}))})}))},M=function(e){e.preventDefault(),e.target.dataset.id&&(R(),N((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(p.a)({},e.target.id,e.target.value))})))},R=function(){var e=v.first_name,t=v.last_name,a=v.phones,n={};Object.entries(a).map((function(e){var t=Object(i.a)(e,2),a=t[0],s=t[1];n[a]=f.a.isMobilePhone(s.number.replaceAll("-",""))})),I(n);var s=x.a.every(n,Boolean),c={first_name:f.a.isLength(e,{min:2,max:24}),last_name:f.a.isLength(t,{min:2,max:24})};S(c);var r=x.a.every(c,Boolean);return q(s&&r),s&&r};return Object(u.jsxs)("div",{className:"edit-wrapper",children:[Object(u.jsx)("h1",{children:"Edit Contact"}),Object(u.jsxs)("div",{className:"user-data",ref:a,children:[Object(u.jsx)("div",{className:"add-phone",title:"Add new phone",onClick:function(e){e.preventDefault();var t=Object(b.a)();t&&N((function(e){return Object(h.a)(Object(h.a)({},e),{},{phones:Object(h.a)(Object(h.a)({},e.phones),{},Object(p.a)({},t,{description:"mobile",number:""}))})}))}}),Object(u.jsx)("div",{className:"remove-phone",title:"Remove phone",onClick:function(e){e.preventDefault();var t=e.target.dataset.id,a=Object.assign({},v.phones);delete a[t],N((function(e){return Object(h.a)(Object(h.a)({},e),{},{phones:a})}))},disabled:1===w,ref:s}),Object(u.jsxs)("div",{className:"user-data_row",children:[Object(u.jsx)("label",{htmlFor:"first_name",children:"First Name:*"}),Object(u.jsx)("input",{id:"first_name",type:"text",placeholder:"First Name",required:!0,value:v?v.first_name:"","data-id":v?v.id:null,onChange:M,className:y.first_name?"":"errorInput"})]}),Object(u.jsxs)("div",{className:"user-data_row",children:[Object(u.jsx)("label",{htmlFor:"last_name",children:"Last Name:*"}),Object(u.jsx)("input",{id:"last_name",type:"text",placeholder:"Last Name",required:!0,value:v?v.last_name:"","data-id":v?v.id:null,onChange:M,className:y.last_name?"":"errorInput"})]}),Object(u.jsx)(u.Fragment,{children:v&&Object.values(v.phones).length&&Object.keys(v.phones).map((function(e){return t=e,s.current&&s.current.setAttribute("data-id",t),Object(u.jsxs)("div",{className:"user-data_row phone-row phone-row_".concat(t),"data-phoneid":t,children:[Object(u.jsx)("label",{htmlFor:t,children:"Phone:*"}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("select",{name:"phone-type",className:"phone-type","data-id":t,value:v.phones[t].description,onChange:U,children:[Object(u.jsx)("option",{value:"mobile",children:"Mobile"}),Object(u.jsx)("option",{value:"work",children:"Work"}),Object(u.jsx)("option",{value:"home",children:"Home"}),Object(u.jsx)("option",{value:"car",children:"Car"})]}),Object(u.jsx)("input",{id:t,type:"text",placeholder:"Phone",value:v.phones[t].number,onChange:L,required:!0,className:F[t]?"":"errorInput"})]})]},t);var t}))})]}),!J&&Object(u.jsx)("p",{className:"all-required",children:"*All fields are required! Phones must be in correct format."}),Object(u.jsxs)("div",{className:"buttons-wrapper",children:[Object(u.jsx)("input",{type:"button",value:"Cancel",className:"cancelBtn",onClick:function(e){e.preventDefault(),t.push("/")}}),Object(u.jsx)("input",{type:"button",value:"Save",className:"saveBtn",onClick:function(e){e.preventDefault(),R()&&(r.find((function(e){return e.id===v.id}))?o((function(e){var t=e.map((function(e){return e.id===v.id?v:e}));return window.localStorage.setItem("address_contacts",JSON.stringify(t)),t})):o((function(e){return[].concat(Object(d.a)(e),[v])})),t.push("/"))}})]})]})},_=(a(139),function(){return Object(u.jsx)("div",{className:"header",children:Object(u.jsxs)("div",{className:"header-wrapper",children:[Object(u.jsx)("h2",{className:"logo",children:"Logo"}),Object(u.jsxs)("div",{className:"links",children:[Object(u.jsx)(o.b,{to:"/",className:"link",children:"Home"}),Object(u.jsx)(o.b,{to:"/",className:"link",children:"About"}),Object(u.jsx)(o.b,{to:"/",className:"link",children:"Contacts"})]})]})})}),g=(a(140),function(){return Object(u.jsx)("div",{className:"footer",children:Object(u.jsxs)("div",{className:"footer_links",children:[Object(u.jsx)("span",{children:"Twitter"}),Object(u.jsx)("span",{children:"Facebook"}),Object(u.jsx)("span",{children:"Instagram"}),Object(u.jsx)("span",{children:"Telegram"})]})})}),w=[{id:"0dadsf-asdf",first_name:"John",last_name:"Dow",phones:{"aaa-001":{number:"+380503332233",description:"mobile"},"aaa-002":{number:"+380503176534",description:"work"}}},{id:"1asdfa-asdfads",first_name:"Dan",last_name:"Brown",phones:{"aaa-003":{number:"+380675233322",description:"mobile"}}},{id:"2asdf-asdf",first_name:"Milla",last_name:"Jovovich",phones:{"aaa-004":{number:"+380663515151",description:"home"}}},{id:"3asdfas-asdf",first_name:"Bruce",last_name:"Willis",phones:{"aaa-005":{number:"+380995890509",description:"mobile"},"aaa-006":{number:"+380995890508",description:"home"},"aaa-007":{number:"+380995890507",description:"work"},"aaa-008":{number:"+380995890506",description:"car"}}}],k=function(){var e=Object(n.useState)(JSON.parse(window.localStorage.getItem("address_contacts"))||w),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(u.jsx)(j.Provider,{value:{users:a,setUsers:s},children:Object(u.jsx)(o.a,{children:Object(u.jsxs)("div",{className:"root-wrapper",children:[Object(u.jsx)(_,{}),Object(u.jsx)("div",{className:"main-wrapper",children:Object(u.jsxs)(l.c,{children:[Object(u.jsx)(l.a,{exact:!0,path:"/",children:Object(u.jsx)(m,{})}),Object(u.jsx)(l.a,{path:"/edit/:id",children:Object(u.jsx)(N,{})})]})}),Object(u.jsx)(g,{})]})})})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(k,{})}),document.getElementById("root"))},52:function(e,t,a){},53:function(e,t,a){},59:function(e,t,a){}},[[141,1,2]]]);
//# sourceMappingURL=main.bcf6f6dc.chunk.js.map